# 8.1 리액트 컨포넌트의 타입

## 8.1.1 클래스 컨포넌트

```tsx
interface Component<P = {}, S = {}, SS = any>
  extends ComponentLifecycle<P, S, SS> {}

class Component<P, S> {
  /* ... */
}

class PureComponent<P = {}, S = {}, SS = any> extends Component<P, S, SS> {}
```

`React.Component` 과 `React.PureComponent` 타입은 제네릭 `P`, `S` 로 props 과 state의 타입을 지정할 수 있게 해준다.

```tsx
interface WelcomeProps {
  name: string;
}

class Welcome extends React.Component<WelcomeProps> {
  /* ... */
}
```

## 8.1.2 함수 컨포넌트 타입

```tsx
function Welcome(props: WelcomeProps): JSX.Element {}
const Welcome: React.FC<WelcomeProps> = ({ name }) => {};
const Welcome: React.VFC<WelcomeProps> = ({ name }) => {}; // v18 이후 삭제
```

- `React.FC` 는 지보적으로 `children` 속성을 포함
- `React.VFC` 는 `children` 없음
- 현재는 `React.VFC` 는 삭제되어 `React.FC`를 이용하는 것이 더 좋은 형식

## 8.1.3 `children` props 타입 지정

```tsx
type WelcomeProps = { children: "천생연붛" | "더 귀한 분" | "귀한 분" | "고마워 분" };
type WelcomeProps = { children: string };
type WelcomeProps = { children: ReactElement };
```

## 8.1.4 render 메서드 및 함수 컨포넌트의 반환 타입

- `ReactElement`: `React.createElement` 결과
- `JSX.Element`: `ReactElement` 확장자, JSX 문맥에서 사용
- `ReactNode`: 더 넓은 타입, string, number, null, boolean 등 모든 JSX 값

```tsx
type ReactNode =
  | ReactChild // ReactElement | string | number
  | ReactFragment // {} | Iterable<ReactNode>
  | ReactPortal
  | boolean
  | null
  | undefined;
```

## 8.1.5 사용 예시

### ReactNode
- `children` 등에 여러 형태의 값을 모두 추약하고 싶을 때

```tsx
interface MyComponentProps {
  children?: React.ReactNode;
}
```

### JSX.Element
- JSX 요소의 props에 접근해야 할 때

```tsx
interface Props {
  icon: JSX.Element;
}

const Item = ({ icon }: Props) => {
  const iconSize = icon.props.size;
  return <li>{icon}</li>;
};
```

### ReactElement
- JSX.Element 대신 그 유형을 만들어서 props 타입을 자동 찾게 하고 싶을 때

```tsx
interface IconProps {
  size: number;
}

interface Props {
  icon: React.ReactElement<IconProps>;
}
```

## 8.1.6 HTML 요소 속성 타입 활용

### React.DetailedHTMLProps

```tsx
type NativeButtonProps = React.DetailedHTMLProps<
  React.ButtonHTMLAttributes<HTMLButtonElement>,
  HTMLButtonElement
>;

type ButtonProps = {
  onClick?: NativeButtonProps["onClick"];
};
```

### React.ComponentPropsWithoutRef

```tsx
type NativeButtonType = React.ComponentPropsWithoutRef<"button">;

type ButtonProps = {
  onClick?: NativeButtonType["onClick"];
};
```

## 8.1.7 함수 컨포넌트와 ref

### forwardRef + ComponentPropsWithoutRef

```tsx
type NativeButtonType = React.ComponentPropsWithoutRef<"button">;

const Button = forwardRef<HTMLButtonElement, NativeButtonType>((props, ref) => {
  return (
    <button ref={ref} {...props}>
      버튼
    </button>
  );
});
```

- `forwardRef` 사용시 전달된 ref가 다운수 HTML DOM에 접근 가능
- props에 `ref`를 포함하고 싶다면 `ComponentPropsWithoutRef` 를 사용

