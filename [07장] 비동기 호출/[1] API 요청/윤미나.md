# 7장 비동기 호출

## 7.1 API 요청

### 7.1.1 fetch로 API 요청하기
비동기 함수인 fetch를 사용하여 API를 요청할 때 비동기 호출 코드를 변경해야할 경우
  - 새로운 API 요청 정책이 추가될때마다 계속해서 비동기 호출 코드를 수정해야 하는 번거로움이 발생한다.

### 7.1.2 서비스 레이어로 분리하기
코드가 변경될 수 있다는 것을 감안한다면, 비동기 호출 코드는 컴포넌트 영역에서 분리되어 다른 영역(서비스 레이어)에서 처리되어야 한다.
 - 쿼리 매개변수, 커스텀 헤더 추가, 쿠키 읽어 토큰 집어넣기 등 다야한 API 정책이 추가될 경우 이를 모두 구현하는 것은 번거롭다.

### 7.1.3 Axios 활용하기
fetch는 내장 라이브러리이기 떄문에 따로 설치할 필요가 없지만 많은 기능을 사용하려면 직접 구현해서 사용해야 한다.
- 번거로움을 해결하기 위해 fetch 함수를 직접 쓰는 대신 **Axios** 라이브러리를 사용한다.
- API Entry가 2개 이상일 경우 Base URL과 2개 이상의 API를 요청하는 인스턴스를 따로 구성해야 한다.
- ```jsx
  import axios, { AxiosInstance } from "axios";

  const defaultConfig = {};
  
  const apiRequester: AxiosInstance = axios.create(defaultConfig);
  const orderApiRequester: AxiosInstance = axios.create({
    baseURL: "https://api.baemin.or/",
    ...defaultConfig,
  });
  const orderCartApiRequester: AxiosInstance = axios.create({
    baseURL: "https://cart.baemin.order/",
    ...defaultConfig,
  });
  ```

### 7.1.4 Axios 인터셉터 사용하기
각각의 requester는 서로 다른 역할을 담당하는 다른 서버이기 때문에 requester별로 다른 헤더를 설정해줘야 하는 로직이 필요할 수도 있다.
  - 이터셉터 기능 사용: requester에 따라 비동기 호출 내용을 추가해서 처리
  - API 에러 처리할 때 하나의 에러 객체러 묶어서 처리


### 7.1.5 API 응답 타입 지정하기

### 7.1.6 뷰 모델(View Model) 사용하기

### 7.1.7 Superstruct를 사용해 런타임에서 응답 타입 검증하기

### 7.1.8 실제 API 응답 시의 Superstruct 활용 사례
