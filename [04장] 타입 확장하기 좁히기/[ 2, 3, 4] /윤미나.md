# 4장 타입 확장하기 좁히기

## 4.2 타입 좁히기 - 타입 가드
변수 또는 표현식의 타입 범위를 더 작은 범위로 좁혀나가는 과정을 말한다.
더 정확하고 명시적인 타입 추론을 할 수 있게 되고, 타입 안정성을 높일 수 있다.
- 4.2.1 타입 가드에 따라 분기 처리하기
  - 조건문과 타입 가드를 활용하여 변수나 표현식의 타입 범위를 좁혀 다양한 상황에 따라 다른 동작을 수행하는 것
  - 타임 가드: 런타임에 조건문을 사용하여 타입을 검사하고 타입 범위를 좁혀주는 기능
    - 연산자를 활용한 타입 가드: typeof, instanceof, in과 같은 연산자를 사용해서 제어문으로 특정 값을 가질 수 밖에 없는 상황을 유도하여 자연스럽게 타입을 좁히는 방식
    > (자바스크립트 연산자를 사용한 이유: 런타임에도 유효한 타입 가드를 만들기 위해서)
    - 사용자 정의 타입 가드: 사용자가 직접 어떤 타입으로 값을 좁힐지를 지정하는 방식
  - 스코프(scope): 변수와 함수를 선언하거나 사용할 수 있는 영역 (변수와 함수 등의 식별자가 유효한 범위를 나타냄.)

- 4.2.2 워시타입을 추론할 때: typeof 연산자 활용하기
  typeof A === B를 조건으로 분기 처리하면, 해당 분기 내에서는 A의 타입이 B로 추론된다.
   - null, 배열 타입 등이 Object 타입으로 판별되는 등 복잡한 타입을 검증하기에는 한계가 있다.
   - typeof 연산자는 **원시 타입을 판별하는 용도**로만 사용할 것을 권장
   - string, number, boolean, undefined, object, function, bigint, symbol

- 4.2.3 인스턴스화된 객체 타입을 판별할 때: instanceof 연산자 활용하기
instanceof 연산자는 **인스턴스화된 객체 타입을 판별**하는 타입 가드로 사용할 수 있다.
  - A instanceof B 형태: A에는 타입을 검사할 대상 변수, B에는 특정 객체의 생성자가 들어간다.
  - A의 프로토타입 체인에 생성자 B가 존재하는지를 검사해서 존재하면 true, 그렇지 않다면 false를 반환한다.

- 4.2.4 객체의 속성이 있는지 없는지에 따른 구분: in 연산자 활용하기
객체에 속성이 있는지 확인한 다음 ture 또는 false를 반환한다. 속성이 있는지 없는지에 따라 객체 타입을 구분할 수 있다.
  - A in B 형태: A라는 속성이 B 객체에 존재하는지 검사
  - true 반환: 프로토타입 체인으로 접근할 수 있는 속성일 때
  - false 반환: delet 연산자를 사용하여 객체 내부에서 해당 속성을 제거했을 때
  - 얼리 리턴: 특정 조건에 부합하지않으면 바로 반환하는 것
 
- 4.2.5 is 연산자로 사용자 정의 타입 가드 만들어 활용하기
직접 타입 가드 함수를 만드는 방식은 반환 타입이 타입 명제인 함수를 정의하여 사용할 수 있다.
  - 타입 명제: A is B 형식 (A는 매개변수 이름, B는 타입)
    - 함수의 반환 타입에 대한 타입 가드를 수행하기 위해 사용되는 특별한 형태의 함수
  - 참/거짓 값을 반환하면서 반환 타입을 타입 명제로 지정하게 되면 **반환 값이 참일 때 A 매개변수의 타입을 B 타입으로 취급**하게 된다.
  - 
